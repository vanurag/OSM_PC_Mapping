<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>libpointmatcher: libpointmatcher</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libpointmatcher
   &#160;<span id="projectnumber">1.2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">libpointmatcher </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>from <a href="http://github.com/ethz-asl/libpointmatcher">http://github.com/ethz-asl/libpointmatcher</a> by François Pomerleau and Stéphane Magnenat (<a href="http://stephane.magnenat.net">http://stephane.magnenat.net</a>), ASL-ETHZ, Switzerland (<a href="http://www.asl.ethz.ch">http://www.asl.ethz.ch</a>)</p>
<p>libpointmatcher is a modular ICP library, useful for robotics and computer vision. This help assumes that libpointmatcher is already installed, if not, please read the <code>README.md</code> file at the top-level of the source tree.</p>
<h1><a class="anchor" id="Test"></a>
Test</h1>
<p>To test, you can use the <code>pmicp</code> command provided in the <code>example</code> directory, or installed system-wide with the <code>-bin</code> deb package.</p>
<p>In 2D: </p><div class="fragment"><div class="line">pmicp ${SRC_DIR}/examples/data/2D_oneBox.csv ${SRC_DIR}/examples/data/data/2D_twoBoxes.csv</div>
</div><!-- fragment --><p> In 3D: </p><div class="fragment"><div class="line">pmicp ${SRC_DIR}/examples/data/car_cloud401.csv ${SRC_DIR}/examples/data/car_cloud400.csv</div>
</div><!-- fragment --><p> Use <a class="el" href="index.html#Paraview">Paraview</a> to view the results. On <a class="el" href="index.html#Ubuntu">Ubuntu</a>, you can install Paraview with: </p><div class="fragment"><div class="line">sudo apt-<span class="keyword">get</span> install paraview</div>
</div><!-- fragment --><p>You can list the available modules with: </p><div class="fragment"><div class="line">pmicp -l</div>
</div><!-- fragment --><p>If you have compiled libpointmatcher with <a class="el" href="index.html#yaml-cpp">yaml-cpp</a> enabled, you can configure the ICP chain without any recompilation by passing a configuration file to the <code>pmicp</code> command using the <code>&ndash;config</code> switch. An example file is available in <code>examples/data/default.yaml</code>.</p>
<h1><a class="anchor" id="Understanding"></a>
Understanding libpointmatcher</h1>
<h2><a class="anchor" id="UnderstandingICP"></a>
ICP - Iterative Closest Point algorithm</h2>
<p>This library implements a modular ICP chain. ICP is an iterative algorithm performing several sequential processing steps, both inside and outside its main loop. For each step, there exist several strategies, and each strategy demands specific parameters. In libpointmatcher, every module is a class that can describe its own possible parameters, therefore enabling the whole chain to be configured at run time using <a href="http://www.yaml.org/">YAML</a> . This text-based configuration aids to explicit parameters used and eases the sharing of working setups with others, which ultimately allows for reproducibility and reusability of the solutions.</p>
<p>The ICP chain takes as input two point clouds, in 2D or 3D, and estimates the translation and the rotation parameters that minimize the alignment error. We called the first point cloud the <em>reference</em> and the second the <em>reading</em>. The ICP algorithm tries to align the reading onto the reference. To do so, it first applies filtering (<a class="el" href="structPointMatcher_1_1DataPointsFilters.html" title="A chain of DataPointsFilter. ">PointMatcher::DataPointsFilters</a>) to the point clouds, and then it iterates through a sequence of processing blocks. For each iteration, it associates points in reading to points in reference (<a class="el" href="structPointMatcher_1_1Matcher.html" title="A matcher links points in the reading to points in the reference. ">PointMatcher::Matcher</a>), rejects outliers (<a class="el" href="structPointMatcher_1_1OutlierFilters.html" title="A chain of OutlierFilter. ">PointMatcher::OutlierFilters</a>) and finds a transformation (<a class="el" href="structPointMatcher.html#a2b7251267b6b2263d8454c66e978c4c2" title="A matrix holding the parameters a transformation. ">PointMatcher::TransformationParameters</a>) of reading that minimizes the alignment error (<a class="el" href="structPointMatcher_1_1ErrorMinimizer.html" title="An error minimizer will compute a transformation matrix such as to minimize the error between the rea...">PointMatcher::ErrorMinimizer</a>).</p>
<h2><a class="anchor" id="UnderstandingArchitecture"></a>
Software architecture</h2>
<p>All modules are children of parent classes defined within the <a class="el" href="structPointMatcher.html" title="Functions and classes that are dependant on scalar type are defined in this templatized class...">PointMatcher</a> class. This class is templatized on the scalar type for the point coordinates, typically <code>float</code> or <code>double</code>. Additionally, the <a class="el" href="namespacePointMatcherSupport.html" title="Functions and classes that are not dependant on scalar type are defined in this namespace. ">PointMatcherSupport</a> namespace hosts classes that do not depend on the template parameter. Every kind of module has its own pair of <em></em>.h and <em></em>.cpp files. Because modules can enumerate their parameters at run time, only the parent classes lie in the publicly accessible header <a class="el" href="PointMatcher_8h.html" title="public interface ">PointMatcher.h</a>. This maintains a lean and easy-to-learn API.</p>
<p>To use libpointmatcher from a third-party program, the two classes <a class="el" href="structPointMatcher_1_1ICP.html" title="ICP algorithm. ">PointMatcher::ICP</a> and <a class="el" href="structPointMatcher_1_1ICPSequence.html" title="ICP alogrithm, taking a sequence of clouds and using a map Warning: used with caution, you need to set the map manually. ">PointMatcher::ICPSequence</a> can be instantiated. The first provides a basic registration between a reading and a reference, given an initial transformation. The second provides a tracker-style interface: an instance of this class receives several point clouds in sequence and continuously updates the transformation with respect to a user-provided point cloud. This is useful to limit drift due to noise in the case of high-frequency sensors such as RGB-D camera. A common base class, <a class="el" href="structPointMatcher_1_1ICPChainBase.html" title="Stuff common to all ICP algorithms. ">PointMatcher::ICPChainBase</a>, holds the instances of the modules and provides the loading mechanism.</p>
<p>When doing research, it is crucial to understand what is going on, in particular in complex processing pipelines like the ICP chain. Therefore, libpointmatcher provides two inspection mechanisms: the <a class="el" href="structPointMatcherSupport_1_1Logger.html" title="The logger interface, used to output warnings and informations. ">PointMatcherSupport::Logger</a> and the <a class="el" href="structPointMatcher_1_1Inspector.html" title="An inspector allows to log data at the different steps, for analysis. ">PointMatcher::Inspector</a>. The logger is responsible for writing information during execution to a file or to the console. It will typically display light statistics and warnings. The inspector provides deeper scrutiny than the logger. There are several instances of inspectors in libpointmatcher. For instance, one dumps ICP operations as <a href="http://www.vtk.org/">VTK</a> files, allowing to visualize the inner loop of the algorithm frame by frame. Another inspector collects statistics for performance evaluation.</p>
<h1><a class="anchor" id="DevelopingUsing"></a>
Developing using libpointmatcher</h1>
<p>If you wish to develop using libpointmatcher, you can start by looking at the sources of icp_simple and pmicp (in <code>example/icp_simple.cpp</code> and <code>example/icp.cpp</code>). You can see how loading/saving of data files work by looking at convert (<code>example/convert.cpp</code>). If you want to see how libpointmatcher can align a sequence of clouds, you can have a look at align_sequence (<code>example/align_sequence.cpp</code>).</p>
<h1><a class="anchor" id="DevelopingSelf"></a>
Extending libpointmatcher</h1>
<p>You can also extend libpointmatcher relatively easily, by adding new modules. The file <a class="el" href="PointMatcher_8h.html" title="public interface ">PointMatcher.h</a> is the most important file, it defines the interfaces for all module types, as well as the ICP algorithms. Each interface is an inner class of the <a class="el" href="structPointMatcher.html" title="Functions and classes that are dependant on scalar type are defined in this templatized class...">PointMatcher</a> class, which is templatized on the scalar type. Instanciation is forced in <code>Registry.cpp</code> for float and double scalar types. There are different types of modules corresponding to the different bricks of the ICP algorithm. The modules themselves are defined in their own files, for instance data-point filters live in the <code>DataPointFiltersImpl.h/<code></code>.cpp</code> files. Start from the documentation of <a class="el" href="structPointMatcher.html" title="Functions and classes that are dependant on scalar type are defined in this templatized class...">PointMatcher</a> to see the different interfaces, and then read the source code of the existing modules for the interface you are interested in, to get an idea of what you have to implement.</p>
<p>All modules have a common way to get parameters at initialization (Parametrizable), and feature a self-documentation mechanism. This allows to configure the ICP chain from external descriptions such as <a class="el" href="index.html#yaml-cpp">yaml files</a>.</p>
<h2><a class="anchor" id="CreatingNewDataPointFilter"></a>
Example: creating a new module of type DataPointsFilter</h2>
<p>You have to modify 3 files to add a new <a class="el" href="structPointMatcher_1_1DataPointsFilter.html">DataPointsFilter</a>: <code>DataPointsFiltersImpl.h</code>, <code>DataPointsFiltersImpl.cpp</code> and <code>Registry.cpp</code>. The easiest way is to start by copying and renaming <code>IdentityDataPointsFilter</code>, and then to modify it.</p>
<ul>
<li>In <code>DataPointsFiltersImpl.h</code>, copy the declaration of the struct <code>IdentityDataPointsFilter</code> at the end of the file.</li>
<li>Rename the pasted structure with the new filter name.</li>
<li>Fill the <code>description()</code> function with a short explanation of the filter's action.</li>
<li>If you need parameters for the filter:<ul>
<li>Uncomment the <code>availableParameters()</code> function and fill the description, default, min, max values as string.</li>
<li>The types of the parameters are used to properly cast the string value and can be: <code>&amp;P::Comp&lt;T&gt;</code>, <code>&amp;P::Comp&lt;int&gt;</code>, <code>&amp;P::Comp&lt;unsigned&gt;</code>, etc. See <code>DataPointsFiltersImpl.h</code> for examples.</li>
<li>Uncomment and rename the constructor.</li>
</ul>
</li>
<li>In <code>DataPointsFiltersImpl.cpp</code>, copy the implementation of <code>IdentityDataPointsFilter</code> at the end of the file including the explicit instantiation (i.e. <code>template</code> <code>struct</code> <code>DataPointsFiltersImpl&lt;float&gt;::YourFilter</code>; and <code>template</code> <code>struct</code> <code>DataPointsFiltersImpl&lt;double&gt;::YourFilter</code>;).</li>
<li>Add the constructor if needed.</li>
<li>At this stage, you should let the implementation of the filter function to hold only the statement that returns the input.</li>
<li>In <code>Registry.cpp</code>, search for <code>"ADD_TO_REGISTRAR(DataPointsFilter,"</code>.</li>
<li>You should see all available <code>DataPointsFilter</code> there. At the end of that block, add your filter.</li>
<li>Compile.</li>
<li>Test if your new module is available with the <code>pmicp</code> <code>-l</code> command, which lists the documentation of all modules. You should be able to find yours in the output.</li>
<li>Go back to <code>DataPointsFiltersImpl.cpp</code> and code the <code>filter()</code> function.</li>
</ul>
<h2><a class="anchor" id="CodingStyle"></a>
Coding Style</h2>
<p>One shall:</p><ul>
<li>indent with tabs,</li>
<li>put {} on single lines (<a class="el" href="index.html#Allman_style">Allman coding style</a>),</li>
<li>use <a class="el" href="index.html#CamelCase">camel case</a> with classes beginning with Capitals and members with a small letter.</li>
</ul>
<p>For documentation, one shall document classes and data members inside the header file and methods at the implementation location. One exception is purely-virtual methods, which must be documented in the header file.</p>
<h1><a class="anchor" id="BugReporting"></a>
Bug reporting</h1>
<p>Please use <a href="http://github.com/ethz-asl/libpointmatcher/issues">github's issue tracker</a> to report bugs.</p>
<h1><a class="anchor" id="Citing"></a>
Citing</h1>
<p>If you use libpointmatcher in an academic context, please cite the following publication: </p><div class="fragment"><div class="line">@INPROCEEDINGS{pomerleau11tracking,</div>
<div class="line">    author = {François Pomerleau and Stéphane Magnenat and Francis Colas and Ming Liu and Roland Siegwart},</div>
<div class="line">    title = {Tracking a Depth Camera: Parameter Exploration <span class="keywordflow">for</span> Fast ICP},</div>
<div class="line">    booktitle = {Proc. of the IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},</div>
<div class="line">    publisher = {IEEE Press},</div>
<div class="line">    pages = {3824--3829},</div>
<div class="line">    year = {2011}</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="License"></a>
License</h1>
<p>libpointmatcher is released under a permissive BSD license.</p>
<h1><a class="anchor" id="References"></a>
References</h1>
<ul>
<li><a class="anchor" id="Eigen"></a>Eigen: <a href="http://eigen.tuxfamily.org">http://eigen.tuxfamily.org</a></li>
<li><a class="anchor" id="libnabo"></a>libnabo: <a href="http://github.com/ethz-asl/libnabo">http://github.com/ethz-asl/libnabo</a></li>
<li><a class="anchor" id="yaml-cpp"></a>yaml-cpp: <a href="http://code.google.com/p/yaml-cpp/">http://code.google.com/p/yaml-cpp/</a></li>
<li><a class="anchor" id="CMake"></a>CMake: <a href="http://www.cmake.org">http://www.cmake.org</a></li>
<li><a class="anchor" id="Boost"></a>Boost: <a href="http://www.boost.org">http://www.boost.org</a></li>
<li><a class="anchor" id="Ubuntu"></a>Ubuntu: <a href="http://www.ubuntu.com">http://www.ubuntu.com</a></li>
<li><a class="anchor" id="CMake"></a>CMake: <a href="http://www.cmake.org">http://www.cmake.org</a></li>
<li><a class="anchor" id="CMakeDoc"></a>CMake documentation: <a href="http://www.cmake.org/cmake/help/cmake2.6docs.html">http://www.cmake.org/cmake/help/cmake2.6docs.html</a></li>
<li><a class="anchor" id="git"></a>git: <a href="http://git-scm.com">http://git-scm.com</a></li>
<li><a class="anchor" id="ROS"></a>ROS: <a href="http://www.ros.org/">http://www.ros.org/</a></li>
<li><a class="anchor" id="Paraview"></a>Paraview: <a href="http://www.paraview.org/">http://www.paraview.org/</a></li>
<li><a class="anchor" id="Allman_style"></a>Allman coding style: <a href="http://en.wikipedia.org/wiki/Indent_style#Allman_style">http://en.wikipedia.org/wiki/Indent_style#Allman_style</a></li>
<li><a class="anchor" id="CamelCase"></a>Camel case style: <a href="http://en.wikipedia.org/wiki/CamelCase">http://en.wikipedia.org/wiki/CamelCase</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
